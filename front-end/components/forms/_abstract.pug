include /_vefa

-
    form = form || new Vefa()
    
    form
        .define({
            class: "fm",
            action: ".",
            method: "GET",
      
            element: {
                "o-base": "pad--y50 rhy--yStart100",
                "o-standard": "pad--y100"
            },
            header: {
                "o-base": "row--pGrid--sMiddle pad--x25",
                "o-standard": "pad--x100"
            },
            hed: {
                class: 'tx--subhed--f1--100'
            },
            footer: {
                "o-base": "row--pEnd--sMiddle pad--x25",
                "o-standard": "pad--x100"
            },
            field: {
                group: {
                    class: "thm--shade20",
                    "o-base": "col--pStart--sStart pad--x50"
                },
                label: {
                    class: "tx--small--f3--900--tcU--aa",
                },
                control: {
                    class: "tx--small--f3--ls100 rhy--xStart50 thm--tint20 rxn--shade20 fx--shift ico--xl",
                    "o-base": "row--pGrid--sMiddle pad--x50 pad--y25 rhy--xStart25",
                }
            }
        })
    
    ctrl = new Vefa()
        .instance({
            data: {
                name: "submit",
                label: "Submit"
            }
        })

block model
- form = form.$freeze()



block view
    form(
        action=form.action
        method=form.method
        class=form.class
    )&attributes(form.element)
        block hdr
            header.fm-hdr&attributes(form.header)
                h1.fm-hed&attributes(form.hed)
                    = form.data.title
        
        
        block bd
            if form.data.fieldsets
                for fieldset, index in form.data.fieldsets
                    include fields/fm-fieldset

        
        block ftr
            footer&attributes(form.footer)
                include /controls/submit
        
        +csrf()

- form = form.$thaw()
